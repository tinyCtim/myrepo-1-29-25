
[

This program factors a number you enter and displays the factors.

2/4/18 1/29,30/20 6/4/23 7/27/25 7/28/25 - converted from factor.c

]

main [
 printf("%cfactor_7_28_25.tc - lrb%c",10,10);

 char start(19),stop(19);
 cdate start;

 int f,s,p(3512),idx,j,pc,sw;char v;
 p(0)=2;p(1)=3;p(2)=5;idx=2;pc=7;

 while(1) [
  printf("%cEnter a number to factor (<=32767) ",10);
  f=gn;
  if (f<=32767) break;
  ]

 printf("%cVerbose mode (show prime generation) (y or Y) ? : ",10);
 v=getchar;
 printf("%c%c",10,10);

 while (idx<3511) [ // load primes
  sw=0;
  j=0;
  if (pc>f) break;
  while (p(j)<p(idx)) [
   if (pc%p(j)==0) [sw=1;break;]
   j=j+1;
   ]
  if(sw==0)[
   idx=idx+1;
   p(idx)=pc;
   if ((v=='y')+(v=='Y')) [
    printf("%d ", pc);
    if (idx%30==0) printf("%c",10);
    ]
   ]
  pc=pc+2;
  ]

 printf("%c%c%d = ",10,10,f);
 s=0;
 int ans;ans=1;
 int fs;fs=f;

 while (1) [ // factor number
  if (f%p(s)==0) [
   printf("%d ",p(s));
   ans=ans*p(s);
   if (ans==fs) break;
   f=f/p(s);
   ]
  else [
   s=s+1;
   ]
  ]

 cdate stop;
 printf("%c%cstart time %s stop time %s",10,10,start,stop);
 ]

